"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[604],{6604:(R,u,l)=>{l.r(u),l.d(u,{UsersModule:()=>O});var g=l(9808),h=l(6370),d=l(98);class m{constructor(){this.id="",this.username="",this.fullname="",this.phone="",this.roles=[]}isNew(){return 0===this.id.length}}var Z=l(4004),p=l(8746),r=l(2382),e=l(1223),f=l(9248),U=l(2183),A=l(7599),t=l(1386),T=l(6464),v=l(3781),C=l(4210),M=l(9361),N=l(9247);function b(n,c){if(1&n&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell"),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.qZA(),e.TgZ(7,"clr-dg-cell"),e._uU(8),e.qZA(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.qZA(),e.TgZ(11,"clr-dg-cell",29)(12,"div",30)(13,"button",31),e._UZ(14,"cds-icon",32),e.qZA(),e.TgZ(15,"button",31),e._UZ(16,"cds-icon",33),e.qZA()()()()),2&n){const o=c.$implicit;e.xp6(2),e.Oqu(o.id),e.xp6(2),e.Oqu(o.username),e.xp6(2),e.Oqu(o.fullname),e.xp6(2),e.Oqu(o.phone),e.xp6(2),e.Oqu(o.roles)}}const q=function(){return[10,20,50,100]},I=[{path:"",component:(()=>{class n{constructor(o){this.userService=o,this.userModalIsOpen=!1,this.users=[],this.loadingUsers=!1,this.form=new r.cw({}),this.selectedUser=new m,this.loadUsers(),this.setFormData()}onNewBtnClick(){this.selectedUser=new m,this.setFormData(),this.userModalIsOpen=!0}loadUsers(){this.loadingUsers=!0,this.userService.getUsers().pipe((0,Z.U)(o=>o.data),(0,p.x)(()=>this.loadingUsers=!1)).subscribe(o=>this.users=o)}setFormData(){const o=this.selectedUser;this.form=new r.cw({username:new r.NI(o.username),fullname:new r.NI(o.fullname),phone:new r.NI(o.phone),password:new r.NI(""),passwordConfirm:new r.NI(""),roles:new r.Oe([])})}submitForm(){this.userService.createUser(this.form.value).pipe((0,p.x)(()=>{this.loadUsers(),this.userModalIsOpen=!1})).subscribe()}modalTitle(){return this.selectedUser.isNew()?"Nuevo usuario":"Editar usuario"}onRoleChange(o){const s=this.form.get("roles");o.target.checked?s.push(new r.NI(o.target.value)):s.controls.forEach((a,i)=>{a.value!==o.target.value||s.removeAt(i)})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(f.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-main"]],decls:78,vars:11,consts:[["title","Usuarios","subtitle","Listado de usuarios registrados","icon","users",3,"solid"],["cds-layout","horizontal",1,"mt1"],[3,"click"],["shape","plus"],[4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize"],["pagination",""],[3,"clrPageSizeOptions"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"clr-row",3,"formGroup"],["layout","vertical-inline",1,"clr-col-12","mb1","mt1"],["placeholder","Nombre completo","formControlName","fullname","required",""],["layout","vertical-inline",1,"clr-col-12","mb1"],["placeholder","Telefono","formControlName","phone","required",""],["placeholder","Usuario","formControlName","username","required",""],["layout","vertical-inline",1,"clr-col-6","mb1"],["placeholder","Contrase\xf1a","formControlName","password","required",""],["placeholder","Repetir","formControlName","passwordConfirm","required",""],["layout","vertical-inline",1,"clr-col-12","mb2"],[1,"mr2"],["type","checkbox","value","SUPER_ADMIN",3,"change"],["type","checkbox","value","ADMIN",3,"change"],["type","checkbox","value","REGULAR",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["shape","times"],["type","button",1,"btn","btn-primary",3,"click"],[1,"flex","jcfe"],[1,"btn-group","btn-primary","btn-icon"],[1,"btn","btn-sm"],["shape","eye","title","Check"],["shape","pencil","title","home"]],template:function(o,s){if(1&o&&(e._UZ(0,"app-title",0),e.TgZ(1,"div",1)(2,"cds-button",2),e.NdJ("click",function(){return s.onNewBtnClick()}),e._UZ(3,"cds-icon",3),e._uU(4," Nuevo "),e.qZA()(),e.TgZ(5,"clr-datagrid")(6,"clr-dg-placeholder"),e._uU(7,"No se han encontrado resultados!"),e.qZA(),e.TgZ(8,"clr-dg-column"),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"clr-dg-column"),e._uU(11,"Usuario"),e.qZA(),e.TgZ(12,"clr-dg-column"),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"clr-dg-column"),e._uU(15,"Telefono"),e.qZA(),e.TgZ(16,"clr-dg-column"),e._uU(17,"Roles"),e.qZA(),e._UZ(18,"clr-dg-column"),e.YNc(19,b,17,5,"clr-dg-row",4),e.TgZ(20,"clr-dg-footer")(21,"clr-dg-pagination",5,6)(23,"clr-dg-page-size",7),e._uU(24,"Items por pagina"),e.qZA(),e._uU(25),e.qZA()()(),e.TgZ(26,"clr-modal",8),e.NdJ("clrModalOpenChange",function(i){return s.userModalIsOpen=i}),e.TgZ(27,"h3",9),e._uU(28),e.qZA(),e.TgZ(29,"div",10)(30,"div",11)(31,"cds-form-group",12)(32,"cds-input")(33,"label"),e._uU(34,"Nombre Completo"),e.qZA(),e._UZ(35,"input",13),e.qZA()(),e.TgZ(36,"cds-form-group",14)(37,"cds-input")(38,"label"),e._uU(39,"Telefono"),e.qZA(),e._UZ(40,"input",15),e.qZA()(),e.TgZ(41,"cds-form-group",14)(42,"cds-input")(43,"label"),e._uU(44,"Usuario"),e.qZA(),e._UZ(45,"input",16),e.qZA()(),e.TgZ(46,"cds-form-group",17)(47,"cds-input")(48,"label"),e._uU(49,"Contrase\xf1a"),e.qZA(),e._UZ(50,"input",18),e.qZA()(),e.TgZ(51,"cds-form-group",17)(52,"cds-input")(53,"label"),e._uU(54,"Repetir Contrase\xf1a"),e.qZA(),e._UZ(55,"input",19),e.qZA()(),e.TgZ(56,"cds-checkbox-group",20)(57,"label"),e._uU(58,"Roles"),e.qZA(),e.TgZ(59,"cds-toggle",21)(60,"label"),e._uU(61,"SUPER"),e.qZA(),e.TgZ(62,"input",22),e.NdJ("change",function(i){return s.onRoleChange(i)}),e.qZA()(),e.TgZ(63,"cds-toggle",21)(64,"label"),e._uU(65,"ADMIN"),e.qZA(),e.TgZ(66,"input",23),e.NdJ("change",function(i){return s.onRoleChange(i)}),e.qZA()(),e.TgZ(67,"cds-toggle")(68,"label"),e._uU(69,"REGULAR"),e.qZA(),e.TgZ(70,"input",24),e.NdJ("change",function(i){return s.onRoleChange(i)}),e.qZA()()()()(),e.TgZ(71,"div",25)(72,"button",26),e.NdJ("click",function(){return s.userModalIsOpen=!1}),e._UZ(73,"cds-icon",27),e._uU(74," Cancelar "),e.qZA(),e.TgZ(75,"button",28),e.NdJ("click",function(){return s.submitForm()}),e._UZ(76,"cds-icon",3),e._uU(77," Guardar "),e.qZA()()()),2&o){const a=e.MAs(22);e.Q6J("solid",!0),e.xp6(19),e.Q6J("clrDgItemsOf",s.users),e.xp6(2),e.Q6J("clrDgPageSize",10),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(10,q)),e.xp6(2),e.lnq(" ",a.firstItem+1," - ",a.lastItem+1," of ",a.totalItems," Items "),e.xp6(1),e.Q6J("clrModalOpen",s.userModalIsOpen),e.xp6(2),e.Oqu(s.modalTitle()),e.xp6(2),e.Q6J("formGroup",s.form)}},directives:[U.r,A._U,t.nkF,T.c,t.C9t,t.PDs,t.Nh1,t.dml,t.K8c,t.F7K,t.m4W,t.KHL,t.f6,t.Z4N,t.Gcc,t.fv_,t.jND,t.dRQ,t.Ltv,t.YYR,t.qAN,t.VLi,r.JL,r.sg,v.b8,C.VU,t.MgK,r.Fj,r.JJ,r.u,r.Q7,M.l,N.rg],encapsulation:2}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(I)],d.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,r.UX,h.m,y]]}),n})()}}]);